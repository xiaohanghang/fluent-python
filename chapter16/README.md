# 协程

> yield item 这行代码会产生一个值，提供给next\(\)的调用方，此外，还会做出让步，暂停执行生成器，让调用方继续工作，直到需要使用另一个值的时候再调用next\(\)。调用方会从生成器中拉取值。此外，还会做出让步，暂停执行生成器，让调用方继续工作，直到需要使用另一个值的时候再调用next（）。调用方会从生成器中拉取值。
>
> 从句法上看， 协程与生成器类似， 都是定义体中包含 yield 关键字的函数。 可是， 在协程中， yield 通常出现在表达式的右边（例如， datum = yield） ， 可以产出值， 也可以不产出——如果 yield关键字后面没有表达式， 那么生成器产出 None。 协程可能会从调用方接收数据， 不过调用方把数据提供给协程使用的是 .send\(datum\) 方法， 而不是 next\(...\) 函数。 通常， 调用方会把值推送给协程。

* 生成器作为协协程使用时的行为和状态
* 使用装饰器自动预激协程
* 调用方如何使用生成器对象的.close\(\)和.throw\(\)方法控制协程。
* 携程终止时如何返回值
* yield from新句法的用途和语义
* 使用案例---使用携程管理仿真系统中的并发活动

# 生成器如何进化为协程

协程的底层架构在“PEP 342—Coroutines via EnhancedGenerators”（https://www.python.org/dev/peps/pep-0342/） 中定义， 并在Python 2.5（2006 年） 实现了。 自此之后， yield 关键字可以在表达式中使用， 而且生成器 API 中增加了 .send\(value\) 方法。 生成器的调用方可以使用 .send\(...\) 方法发送数据， 发送的数据会成为生成器函数中 yield 表达式的值。 因此， 生成器可以作为协程使用。 协程是指一个过程， 这个过程与调用方协作， 产出由调用方提供的值。



